import{r as o,j as r}from"./index-CEUxYXHF.js";import{g as w}from"./index-CH_iu5NA.js";const u=[];for(let t=0;t<256;++t)u.push((t+256).toString(16).slice(1));function $(t,n=0){return(u[t[n+0]]+u[t[n+1]]+u[t[n+2]]+u[t[n+3]]+"-"+u[t[n+4]]+u[t[n+5]]+"-"+u[t[n+6]]+u[t[n+7]]+"-"+u[t[n+8]]+u[t[n+9]]+"-"+u[t[n+10]]+u[t[n+11]]+u[t[n+12]]+u[t[n+13]]+u[t[n+14]]+u[t[n+15]]).toLowerCase()}let k;const q=new Uint8Array(16);function z(){if(!k){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k=crypto.getRandomValues.bind(crypto)}return k(q)}const A=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),C={randomUUID:A};function B(t,n,d){if(C.randomUUID&&!t)return C.randomUUID();t=t||{};const a=t.random??t.rng?.()??z();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,$(a)}const M=({x:t,y:n,value:d,highlight:a,inserted:x,removed:v,onRemove:g})=>{const f=o.useRef();return o.useEffect(()=>{x&&w.fromTo(f.current,{scale:0,opacity:0},{scale:1,opacity:1,duration:.5,ease:"back.out(1.7)"})},[x]),o.useEffect(()=>{a&&w.timeline().to(f.current,{fill:"#f00",duration:1.7}).to(f.current,{fill:"#81baffff",duration:1.5})},[a]),o.useEffect(()=>{v&&w.to(f.current,{scale:0,opacity:0,duration:1,ease:"power1.out",onComplete:g})},[v,g]),r.jsxs("g",{children:[r.jsx("circle",{ref:f,cx:t,cy:n,r:20,fill:"#81baffff",stroke:"#3498db",strokeWidth:1,style:{transformOrigin:`${t}px ${n}px`}}),r.jsx("text",{x:t,y:n+5,textAnchor:"middle",fontSize:"14",fill:"#fff",fontWeight:"bold",pointerEvents:"none",children:d})]})},U=t=>t?1+Math.max(U(t.left),U(t.right)):0,G=()=>{const[t,n]=o.useState(""),d=o.useRef(null),[a,x]=o.useState([]),[v,g]=o.useState(null),[f,j]=o.useState([]),[D,b]=o.useState([]),[E,T]=o.useState([]),P=e=>({value:e,left:null,right:null}),N=(e,s)=>e?(s<e.value?e.left=N(e.left,s):s>e.value&&(e.right=N(e.right,s)),e):P(s),X=e=>{for(;e&&e.left;)e=e.left;return e},y=(e,s)=>{if(!e)return null;if(s<e.value)e.left=y(e.left,s);else if(s>e.value)e.right=y(e.right,s);else{if(!e.left&&!e.right)return null;if(!e.left)return e.right;if(!e.right)return e.left;const c=X(e.right);e.value=c.value,e.right=y(e.right,c.value)}return e},R=(e,s=0,c=50,p=750,i=[],l=null)=>{if(!e)return i;const h=(c+p)/2,m=80+s*80;return i.push({id:e.value.toString(),value:e.value,x:h,y:m,parentX:l?.x,parentY:l?.y}),R(e.left,s+1,c,h,i,{x:h,y:m}),R(e.right,s+1,h,p,i,{x:h,y:m}),i},S=(e,s)=>{const p=R(d.current).map(i=>({id:a.find(h=>h.value===i.value)?.id||B(),value:i.value,x:i.x,y:i.y,parentX:i.parentX,parentY:i.parentY,inserted:i.value===e,removed:!1}));if(s!=null){const i=a.find(l=>l.value===s);i&&p.push({...i,removed:!0})}x(p)},V=()=>{const e=parseInt(t);isNaN(e)||(d.current=N(d.current,e),S(e,null),n(""))},W=()=>{const e=parseInt(t);isNaN(e)||(d.current=y(d.current,e),S(null,e),n(""))},Y=e=>{x(s=>s.filter(c=>c.id!==e)),S(null,null)},I=async e=>{if(!d.current)return;const s=[],c={inorder:l=>{l&&(c.inorder(l.left),s.push(l.value),c.inorder(l.right))},preorder:l=>{l&&(s.push(l.value),c.preorder(l.left),c.preorder(l.right))},postorder:l=>{l&&(c.postorder(l.left),c.postorder(l.right),s.push(l.value))}};c[e](d.current),e==="inorder"&&j([]),e==="preorder"&&b([]),e==="postorder"&&T([]);const p=[...a],i=[];for(let l of s){const h=p.find(m=>m.value===l);h&&(g(h.id),i.push(l),e==="inorder"&&j([...i]),e==="preorder"&&b([...i]),e==="postorder"&&T([...i]),await new Promise(m=>setTimeout(m,2e3)))}g(null)},H=100+U(d.current)*80;return r.jsxs("section",{children:[r.jsx("div",{children:r.jsxs("h6",{className:"Tree-heading",tabIndex:"-1",children:["Tree ",r.jsx("span",{children:" Visualizer"})]})}),r.jsx("div",{className:"Tree-input",children:r.jsx("input",{type:"number",value:t,onChange:e=>n(e.target.value),placeholder:"Enter a number"})}),r.jsxs("div",{className:"Tree-button",children:[r.jsx("button",{onClick:V,className:"Tree-btn",children:"Insert"}),r.jsx("button",{onClick:W,className:"Tree-btn",children:"Delete"}),r.jsx("button",{onClick:()=>{d.current=null,x([]),g(null),j([]),b([]),T([])},className:"Tree-btn",children:"Reset"}),r.jsx("button",{onClick:()=>I("inorder"),className:"Tree-btn",children:"Inorder"}),r.jsx("button",{onClick:()=>I("preorder"),className:"Tree-btn",children:"Preorder"}),r.jsx("button",{onClick:()=>I("postorder"),className:"Tree-btn",children:"Postorder"})]}),r.jsxs("svg",{width:"100%",height:H,className:"Tree-canvas",children:[a.map(e=>e.parentX!=null&&r.jsx("line",{x1:e.parentX,y1:e.parentY,x2:e.x,y2:e.y,stroke:"#555",strokeWidth:"2"},`l-${e.id}`)),a.map(e=>r.jsx(M,{x:e.x,y:e.y,value:e.value,highlight:e.id===v,inserted:e.inserted,removed:e.removed,onRemove:()=>Y(e.id)},e.id))]}),r.jsxs("div",{className:"Tree-traverse-results",children:[r.jsx("h2",{children:"Traversal Outputs"}),r.jsxs("p",{children:[r.jsx("strong",{children:"Inorder:"})," ",f.join(" -> ")]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Preorder:"})," ",D.join(" -> ")]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Postorder:"})," ",E.join(" -> ")]})]})]})};export{G as default};
